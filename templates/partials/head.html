<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="alx-movie-app: A Specialisation Portfolio Project for the ALX SE Program">
<meta name="author" content="Peter Onwuzuruigbo; Clinton Mokaya; Lewis Mwangi; Geoffrey Agwata (Cohort 8, [0622])">
<!-- Bootstrap core CSS -->
<link href="/assets/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<!-- Favicons -->
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/assets/img/favicon.png" type="image/png">
{#    <link rel="manifest" href="/assets/img/favicons/manifest.json">#}
<link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
<link rel="icon" href="/assets/img/favicons/favicon.ico">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap"
      rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2/dist/sweetalert2.all.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
<meta name="theme-color" content="#000000">
<script type="text/javascript">
    var blockUI;
    var showLoader = function (customMsg) {
        blockUI = Swal.fire({
            icon: null,
            html: '<div class="py-5 d-flex flex-column align-items-center"><div class="spinner-grow text-danger" role="status"> </div> <div class="mt-4 fw-bold"><span id="loader-custom-msg">Loading</span>...</div></div>',
            title: null,
            showCancelButton: false,
            showCloseButton: false,
            showConfirmButton: false,
            allowOutsideClick: false
        });
        if (customMsg !== undefined) {
            document.querySelector('#loader-custom-msg').innerHTML = customMsg;
        } else {
            document.querySelector('#loader-custom-msg').innerHTML = 'Loading';
        }
    };

    var hideLoader = function () {
        blockUI.close()
    };

    var isJson = function (item) {
        item = typeof item !== "string" ? JSON.stringify(item) : item;
        try {
            item = JSON.parse(item);
        } catch (e) {
            return false;
        }
        return (typeof item === "object" && item !== null)
        return false;
    };

    var formatError = function (_obj, flat = false, success = false) {
        var errorList = [];
        if (typeof _obj === 'object' && !Array.isArray(_obj) && _obj !== null) {
            Object.keys(_obj).map(function (key, index) {
                errorList.push('<b>' + titleCase(key.toLocaleString()) + '</b>: ' + _obj[key] + '<br>');
            }).join('<br>');
        } else {
            errorList.push(_obj);
        }

        let error_string = errorList.join(' ');

        if (flat) {
            return error_string;
        } else {
            setTimeout(function () {
                if (!success) {
                    Swal.fire({
                        icon: "error",
                        html: error_string,
                        title: null,
                        customClass: {
                            confirmButton: "btn btn-danger"
                        }
                    });
                } else {
                    Swal.fire({
                        icon: "success",
                        html: error_string,
                        title: 'Success',
                        customClass: {
                            confirmButton: "btn btn-success"
                        }
                    });
                }
            }, 200);
        }
    };

    var titleCase = function (string) {
        var sentence = string.toLowerCase().split(" ");
        for(let i = 0; i< sentence.length; i++){
            sentence[i] = sentence[i][0].toUpperCase() + sentence[i].slice(1);
        }
        return sentence;
    }
</script>
